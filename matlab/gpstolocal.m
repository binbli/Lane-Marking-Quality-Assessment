
clc;clear all;

gtgps = [49.028379740816 8.3576200380035
49.028381626571 8.357611579154 
49.028383714571 8.3576022613723
49.028385629575 8.3575938114421
49.028387555844 8.3575853346817
49.028389671629 8.3575760371257
49.028391606176 8.3575675559024
49.028393748009 8.3575582682869
49.028395691785 8.3575497980175
49.028397609303 8.3575413345818
49.028399510054 8.3575328887407
49.02840159795 8.3575236062221 
49.02840349241 8.3575152095749 
49.028405374591 8.3575068133665
49.028407418702 8.3574976078991
49.028409264446 8.3574892318202
49.028411099791 8.3574808761613
49.028413113034 8.3574716886406
49.028414933284 8.3574633462768
49.028416755206 8.3574550297427
49.028418741098 8.3574458709042
49.028420533118 8.3574375451527
49.02842232199 8.357429219452  
49.028424297365 8.3574200745933
49.028426079264 8.3574117792149
49.028428030776 8.3574026606216
49.028429803641 8.3573943704334
49.028431573415 8.3573860847493
49.028433500375 8.3573769731287
49.028435246223 8.3573686834151
49.028436997123 8.3573604034788
49.028438926269 8.3573513200601
49.028440684233 8.3573430896831
49.028442439838 8.3573348761216
49.028444365605 8.3573258705808
49.028446111298 8.3573177139922
49.028447861404 8.3573095899878
49.028449798685 8.3573006948093
49.02845155859 8.3572926178987 
49.028453324523 8.3572845719629
49.028455264608 8.3572757371141
49.028457023208 8.3572677319311
49.028458791006 8.3572597406817
49.028460770485 8.3572510153537
49.028462589014 8.3572431104773
49.028464419229 8.3572352653346
49.028466441759 8.3572266802513
49.028468305271 8.3572189490855
49.028470174707 8.3572112703278
49.028472229078 8.3572028883621
49.028474092956 8.3571953630785
49.02847614863 8.3571872075518 
49.028478018559 8.3571799145532
49.028479866312 8.357172727692 
49.02848189403 8.3571649851989 
49.028483722037 8.3571580840148
49.028485534958 8.3571513396649
49.028487499181 8.3571440924839
49.028489272197 8.3571376972127
49.028491027269 8.3571314767143
49.028492931268 8.3571248571717
49.028494632415 8.3571190402135
49.028496294753 8.3571134183462
49.02849808633 8.3571074760533 
49.02849966696 8.3571022791142 
49.028501380794 8.3570967739278
49.028502913029 8.3570919232997
49.02850440336 8.3570871980066 
49.028506008473 8.3570821615701
49.028507416837 8.3570777467623
49.028508785504 8.3570734942185
49.028510090297 8.3570694122307
49.028511473277 8.3570651432593
49.028512645698 8.3570614371321
49.028513871798 8.3570575931078
49.028514900388 8.3570542909816
49.028515862535 8.3570512152278
49.028516839541 8.3570481082241
49.028517648761 8.3570455077314
49.028518375824 8.357043110757 
49.028519081685 8.3570407358669
49.028519648476 8.3570387909804
49.028520163672 8.3570370555475
49.028520697021 8.3570352051159
49.028521146996 8.3570335241398
49.028521587315 8.3570318367759
49.028522074361 8.3570300349466
49.02852250197 8.3570283707202 
49.028522910289 8.3570266973063
49.028523339821 8.3570248632845
49.028523701839 8.3570231816585
49.028524049297 8.3570214931161
49.028524424198 8.3570195775451
49.028524765422 8.3570177925886
49.028525098606 8.3570158872317
49.028525458586 8.3570136475797
49.028525775069 8.357011459805 
49.028526107369 8.357008887632 
49.028526393051 8.3570063814276
49.028526661049 8.35700372498  
49.028526924356 8.3570006023795
49.028527128549 8.3569975838924
49.028527283359 8.3569943655999
49.028527387983 8.3569905928328
49.028527429539 8.356986911436 
49.028527416452 8.35698298819  
49.028527319123 8.3569783981246
49.028527108183 8.3569739745429
49.028526752781 8.3569693448028
49.028526176417 8.3569640410259
49.02852549096 8.356959125336  
49.028524559234 8.3569536930641
49.028523575635 8.3569487509482
49.02852245641 8.3569438238653 
49.02852119884 8.3569388991306 
49.028519638741 8.3569335393656
49.028518044457 8.3569287157615
49.028516117186 8.3569234857478
49.028514212284 8.3569187748938
49.028512167863 8.3569141295178
49.028509729456 8.356909141209 
49.028507359186 8.3569046956496
49.028504855281 8.3569003758634
49.028501940581 8.3568957638438
49.028499138655 8.3568917171742
49.028495884043 8.3568874235083
49.028492772403 8.3568836804842
49.028489535332 8.3568800452404
49.028485833739 8.3568761880488
49.028482326747 8.3568728092723
49.028478680239 8.3568695824094
];
nM = size(gtgps, 1);
angleamat = [];
dismat = [];
for i = 2:nM
    latitude1 = gtgps(1,1);
    longitude1= gtgps(1,2);
    latitude2 = gtgps(i,1);
    longitude2= gtgps(i,2);
    dist = CoordinatesToMeters(latitude1,longitude1,latitude2,longitude2);
    angle = CoordinatesToAngle(latitude1,longitude1,latitude2,longitude2) ;
    angleamat = [angleamat; angle];
    dismat = [dismat; dist];
end
disp(' ');



function dist = CoordinatesToMeters(latitude1,longitude1,latitude2,longitude2) 

m_earthDiameterMeters = 6365.998 * 2 * 1000;
latitude1  = deg2rad(latitude1);
longitude1 = deg2rad(longitude1);
latitude2  = deg2rad(latitude2);
longitude2 = deg2rad(longitude2);

x = sin((latitude2 - latitude1)/2);
y = sin((longitude2 -longitude1)/2);

dist =  m_earthDiameterMeters * asin(sqrt((x*x) + (cos(latitude1)*cos(latitude2)*y*y)));

end


function angle = CoordinatesToAngle(latitude1,longitude1,latitude2,longitude2) 
        longitudeDifference = deg2rad(longitude2 - longitude1);
        latitude1 = deg2rad(latitude1);
        latitude2 = deg2rad(latitude2);  
        x = (cos(latitude1) * sin(latitude2)) -  (sin(latitude1) * cos(latitude2) * cos(longitudeDifference));
        y = sin(longitudeDifference) * cos(latitude2);
       degree = rad2deg(atan2(y, x));
       if degree >= 0
           angle = degree;
       else
           angle = degree + 360;
       end
end

